<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ground station</title>
    <link rel="icon" type="image/x-icon" href="img/favicon.ico">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/leaflet.css">
    <link rel="stylesheet" href="css/style.css">
    <script type="importmap">
        {
            "imports": {
                "three": "./js/lib/threejs/three.module.js",
                "three/addons/": "./js/lib/threejs/"
            }
        }
    </script>
</head>

<body>

    <header>
        <nav id="my-navbar" class="navbar px-3">
            <div class="d-flex flex-wrap">
                <img src="img/logo-gaul.webp" alt="Logo GAUL" height="32" class="mt-2">
                <h1 class="title ms-3">Ground station</h1>
            </div>
            <div class="d-flex justify-content-around">
                <a id="simple" class="btn btn-secondary mx-1" href="/simple.html">Simple</a>
                <button id="reset-btn" class="btn btn-primary mx-1" onclick="page.reset_all()">Reset</button>
                <button id="start-btn" class="btn btn-primary mx-1" onclick="createSocket()">Start</button>
                <button id="stop-btn" class="btn btn-danger mx-1" onclick="removeSocket()">Stop</button>
                <a id="options" class="btn btn-secondary mx-1" href="#">Settings</a>
            </div>
        </nav>
    </header>

    <main>
        <div class="container-fluid h-100">
            <div class="row h-100">
                <!-- Map component -->
                <div id="map-container" class="col-lg-4 component-container">
                    <div id="map-coords-container" class="value-container">
                        <h5 id="map-text">Pos:</h5>
                        <h5 id="map-coords">0.0000, 0.0000</h5>
                    </div>
                    <div id="map"></div>
                </div>
                <!-- Map component end -->
                <!-- Altitude, Speed and Acceleration component -->
                <div id="alt-speed-acc-container" class="col-lg-8 component-container double-container">
                    <div class="row g-0 h-100">
                        <div id="alt-speed-acc-value-container" class="col-lg-5 d-flex flex-wrap">
                            <div id="alt-value-container" class="value-container">
                                <h5 id="alt-text">Altitude:</h5>
                                <h5 id="alt-value">0.0 m</h5>
                            </div>
                            <div id="speed-value-container" class="value-container">
                                <h5 id="speed-text">Speed:</h5>
                                <h5 id="speed-value">0.0 m/s</h5>
                            </div>
                            <div id="acc-value-container" class="value-container">
                                <h5 id="acc-text">Accel.:</h5>
                                <h5 id="acc-value">0.0 m/s²</h5>
                            </div>
                        </div>
                        <div id="chart-container" class="col-lg-7 px-3 h-100">
                            <canvas id="chart"></canvas>
                        </div>
                    </div>
                </div>
                <!-- Altitude, Speed and Acceleration component end -->
                <!-- Checks component -->
                <div id="checks-container" class="col-lg-4 d-flex flex-wrap component-container">
                    <!-- Battery -->
                    <div id="batt-value-container" class="value-container">
                        <h5 id="batt-text">Battery:</h5>
                        <h5 id="batt-state" class="text-danger">ERROR</h5>
                    </div>
                    <!-- GPS -->
                    <div id="gps-value-container" class="value-container">
                        <h5 id="gps-text">GPS Fix:</h5>
                        <h5 id="gps-state" class="text-danger">ERROR</h5>
                    </div>
                    <!-- Igniter -->
                    <div id="igni-value-container" class="value-container">
                        <h5 id="igni-text">Igniter:</h5>
                        <h5 id="igni-state" class="text-danger">ERROR</h5>
                    </div>
                    <!-- Connection status -->
                    <div id="conn-value-container" class="value-container">
                        <h5 id="conn-text">Last fetch:</h5>
                        <h5 id="conn-value">???</h5>
                    </div>
                </div>
                <!-- Checks component end -->
                <!-- Orientation component -->
                <div id="ori-container" class="col-lg-8 component-container double-container">
                    <div class="row g-0 h-100">
                        <div id="ori-value-container" class=" col-lg-5 d-flex flex-wrap">
                            <div id="pitch-value-container" class="value-container">
                                <h5 id="pitch-text">Pitch:</h5>
                                <h5 id="pitch-value">0°</h5>
                            </div>
                            <div id="yaw-value-container" class="value-container">
                                <h5 id="yaw-text">Yaw:</h5>
                                <h5 id="yaw-value">0°</h5>
                            </div>
                            <div id="roll-value-container" class="value-container">
                                <h5 id="roll-text">Roll:</h5>
                                <h5 id="roll-value">0°</h5>
                            </div>
                        </div>
                        <div id="ori-view" class="col-lg-7 px-3 d-flex justify-content-center"></div>
                    </div>
                </div>
                <!-- Orientation end -->
                <!-- Temperature/Vibration/Landing force component -->
                <div id="temp-vibr-land-container" class="col-lg-4 d-flex flex-wrap component-container">
                    <div id="temp-amb-value-container" class="value-container">
                        <h5 id="temp-amb-text">Ambient temp.:</h5>
                        <h5 id="temp-amb-value">21.0 °C</h5>
                    </div>
                    <div id="temp-value-container" class="value-container">
                        <h5 id="temp-text">Engine temp.:</h5>
                        <h5 id="temp-value">0.0 °C</h5>
                    </div>
                    <div id="vibr-value-container" class="value-container">
                        <h5 id="vibr-text">Vibrations:</h5>
                        <h5 id="vibr-value">0.0 Hz</h5>
                    </div>
                    <div id="land-value-container" class="value-container">
                        <h5 id="land-text">Land. force:</h5>
                        <h5 id="land-value">0.0 m/s²</h5>
                    </div>
                </div>
                <!-- Temperature/Vibration/Landing force component end -->
                <!-- Console component -->
                <div id="console-container" class="col-lg-8 d-flex flex-column component-container">
                    <h5 class="px-2 mb-2">Console</h5>
                    <div id="console-text" class="border rounded p-2 px-3 overflow-auto">
                        <p class="text-danger">[12.3] Lost connection</p>
                        <p>[13] Connected</p>
                        <p>[14] Serial Skip</p>
                        <p>[14.9] Etc 1</p>
                        <p>[15] Etc 2</p>
                        <p>[16] Etc 3</p>
                        <p>[17] Etc 4</p>
                        <p>[18] Etc 5</p>
                        <p>[19] Etc 6</p>
                        <p>[20] Etc 7</p>
                        <p>[21] Etc 8</p>
                        <p>[22] Etc 9</p>
                    </div>
                </div>
                <!-- Console component end -->
            </div>
        </div>
    </main>

    <script src="js/lib/bootstrap.bundle.min.js"></script>
    <script src="js/lib/chart.js"></script>
    <script src="js/lib/leaflet.js"></script>
    <script src="js/lib/socket.io.min.js"></script>
    <script type="module" src="js/3d.js"></script>
    <script src="js/components.js"></script>
    <script src="js/main.js"></script>

</body>

</html>